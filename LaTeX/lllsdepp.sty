% =============
% 教育学研究科・教育学部テンプレート用スタイルファイル
% =============

% ===== MACRO SCRIPTS =====
\makeatletter

% 章タイトルを1行にまとめる（対word互換）
\def\@makechapterhead#1{
  \vspace*{2\Cvs}
  {\parindent \z@ \raggedright \normalfont
    \Huge\headfont
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
        \@chapapp\thechapter\@chappos
        \hskip1zw
      \fi
    \fi
    #1\par\nobreak
  \vskip 3\Cvs}%
}

% 見出しの欧文も太字ゴシックにする
\renewcommand{\headfont}{\bfseries\sffamily}

% ==== TITLE PAGE ====
\newcommand*{\thesisNendo}[1]{\gdef\@thesisNendo{#1}}
\newcommand*{\thesisClass}[1]{\gdef\@thesisClass{#1}}
\newcommand*{\thesisAuthor}[1]{\gdef\@thesisAuthor{#1}}
\newcommand*{\thesisAuthorID}[1]{\gdef\@thesisAuthorID{#1}}
\newcommand*{\thesisTeacher}[1]{\gdef\@thesisTeacher{#1}}
\newcommand*{\thesisTitle}[1]{\gdef\@thesisTitle{#1}}
\newcommand*{\thesisSubTitle}[1]{\gdef\@thesisSubTitle{#1}}
\renewcommand{\maketitle}{%
  \begin{titlepage}
  	\centering \large \@thesisNendo 年度 \;
    \ifthenelse{\equal{\@thesisClass}{教育学研究科}}{修士}{卒業}論文
  	\par \vspace{10zh}
  	\LARGE \textbf{\@thesisTitle} \par \medskip
    \ifthenelse{\isundefined{\@thesisSubTitle}}
      {}{\Large ---\,\@thesisSubTitle\,---}
  	\normalsize \par \vspace*{\fill}
    \ifthenelse{\equal{\@thesisClass}{教育学研究科}}{
    	東京大学大学院　教育学研究科\\
    	総合教育科学専攻\\
    	生涯学習基盤経営コース\\
    }{
      東京大学　教育学部\\
      総合教育科学科\\
      教育実践・政策学コース\\
    } \medskip
    \@thesisAuthorID\\
    \Large \emph{\@thesisAuthor} \normalsize \medskip\\
    指導教員：\@thesisTeacher
  \end{titlepage}
}

\makeatother


% ===== DEFAULT PACKAGES =====
% 下記のパッケージ順は原則として変更しないこと
% パッケージの読み込み順が問題となる場合のみ、適宜変更してよい

% ==== GENRAL ====
\usepackage[dvipdfmx]{graphicx}  % 画像の挿入
\usepackage{ifthen}  % タイトルページの条件分岐に使用

% ==== FONT ====
\usepackage[T1]{fontenc}  % 8bitフォント
\usepackage[utf8]{inputenc}  % UTF-8固定 ウムラウトなど普通に打ってよい

% === Times New Roman improved ===
\usepackage[defaultsups]{newtxtext}
\usepackage{newtxmath}
\usepackage[zerostyle=d]{newtxtt}

\usepackage{textcomp}  % 記号の拡張。読み込み順が原因でエラーをよく吐くので適宜並び替えてよい
\usepackage[scaled]{helvet}  % 見出し英数字をHelveticaに

% 和文フォントの高機能化
%% 丸数字などの提供と和文フォントの太字を利用可にする
%% boldオプションにより太字が全てゴシック太字になる（明朝太字は使わない）
\usepackage[bold]{otf}

% ==== UTILITY ====
\usepackage{okumacro}  % 奥村晴彦のマクロ、ときどき便利
\usepackage[hyphens]{url}  % \url 命令の提供
\usepackage{warning}

% 引用をスマートにする。入れ子になったときのかぎかっこの使い分けが自動に。
% \textquote, \blockquote
\usepackage[strict]{csquotes}
\renewcommand*{\mkcitation}[1]{ #1 }
% 以下、日本語向け設定
  % \DeclareQuoteStyle{japanese}
  %   {「}
  %   {」}
  %   {『}
  %   {』}
  % \setquotestyle{japanese}

% ==== BIBILIOGRAPHY ====
\usepackage{natbib}
% \citep => (著者性, 出版年), \citet => 著者性 (出版年)
\bibliographystyle{jecon_mine}  % 経済学向け参考文献スタイル

%% PDFに目次をつける
\usepackage[dvipdfmx,bookmarksnumbered=true]{hyperref}
\usepackage[hyperpageref]{backref}
\usepackage{notoccite}  % 目次での引用を無効化。参考文献順が引用順であるときに

%% 脚注番号を章でまたいで連番とする
\usepackage{chngcntr}
  \counterwithout*{footnote}{chapter}


% ===== USER PACKAGES =====
% 使いたいパッケージがある場合はここに追記すること
% パッケージの読み込み順の関係で動かないものがある場合のみ、任意の位置に置いて良い

% 例：便利なパッケージ
% 使い方はパッケージ名で検索したり、ドキュメントを読むことを推奨
\usepackage{booktabs}  % 表をきれいに整形できる
\usepackage{multirow}  % 表のセルを結合できる
\usepackage{ascmac}  % 文章に囲みをつけられる
% 下書きの最中に活躍するパッケージ
\usepackage[dvistyle,textsize=tiny]{todonotes}  % TODOをPDFに表示。先生との面談にも使える
% \usepackage{refcheck}  % 使われていないlabelを表示
% \usepackage[notref,notcite]{showkeys}  % labelのキーをPDFにも表示

%% 独自ヘッダーの定義、100ページ以上になって両面印刷したいときにいじるとよい
% \usepackage{fancyhdr}


% ===== USER MACRO SCRIPTS =====
% マクロを定義したい場合はここで行うこと

% 例：用語の定義に使える\defterm => 「専門用語 (technical term)」などとできる
\newcommand*{\defterm}[2]{\textbf{#1} {\emph{(#2)}}}

% 例：脚注としてURLを参照するときにつかえる \footurl
%% 第2引数でアクセス日を指定でき、デフォルトではコンパイル日となる
\newcommand{\footurl}[2][\today]{\footnote{\url{#2} （アクセス日: #1）}}

% 人工知能学会の倍角ダッシュ \ddash
%% 本文に使うダッシュはこちらがおすすめ
\makeatletter
  \def\ddash{\protect\@ddash}
  \def\@ddash{\raisebox{.3zw}[0pt]{\hbox to2zw{\hss\hskip.1zw
  \rule{1.8zw}{.04zw}\hskip.1zw\hss}}}
\makeatother


% ===== !!CAUTION!! =====
% DO NOT EDIT THIS AREA
% 原則、この行より後ろでパッケージ読み込みやコマンド定義をしないこと

% \cref で引用することで、label先に合わせて補完をしてくれる
% 終わりの方に置かないと不具合を起こす
\usepackage[noabbrev]{cleveref}
  \crefformat{part}{第~#2#1#3~部}
  \crefformat{chapter}{第~#2#1#3~章}
  \crefformat{section}{#2#1#3~節}
  \crefformat{subsection}{#2#1#3~項}
  \crefname{figure}{図}{図}
  \crefname{table}{表}{表}
  \crefname{equation}{式}{式}
  \crefname{appendix}{付録}{付録}
  \crefname{enumi}{項番}{項番}
  \newcommand{\crefpairconjunction}{, }
  \newcommand{\crefmiddleconjunction}{, }
  \newcommand{\creflastconjunction}{, }

% hyperrefをjsclassesで使う時のバグを修正
% cleverefの後でないと機能しない模様
\usepackage{pxjahyper}
